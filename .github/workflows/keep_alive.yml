name: Keep Workflows Alive

# GitHubÎäî 60Ïùº ÎèôÏïà Ï†ÄÏû•ÏÜå ÌôúÎèôÏù¥ ÏóÜÏúºÎ©¥ scheduled workflowsÎ•º ÏûêÎèô ÎπÑÌôúÏÑ±ÌôîÌï©ÎãàÎã§
# Ïù¥ ÏõåÌÅ¨ÌîåÎ°úÏö∞Îäî Ï£ºÍ∏∞Ï†ÅÏúºÎ°ú Ïã§ÌñâÎêòÏñ¥ scheduled workflowsÍ∞Ä ÎπÑÌôúÏÑ±ÌôîÎêòÎäî Í≤ÉÏùÑ Î∞©ÏßÄÌï©ÎãàÎã§

on:
  schedule:
    # Îß§Ï£º ÏõîÏöîÏùº 00:00 UTC (09:00 KST)Ïóê Ïã§Ìñâ
    - cron: '0 0 * * 1'
  workflow_dispatch:

permissions:
  contents: write

jobs:
  keep-alive:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Update keep-alive timestamp
        run: |
          mkdir -p .github/metadata
          echo "Last keep-alive: $(date -u +'%Y-%m-%d %H:%M:%S UTC')" > .github/metadata/keep_alive.txt
          echo "This file prevents GitHub from disabling scheduled workflows" >> .github/metadata/keep_alive.txt

      - name: Commit keep-alive update
        run: |
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git config --local user.name "github-actions[bot]"
          git add .github/metadata/keep_alive.txt

          if ! git diff --quiet || ! git diff --staged --quiet; then
            git commit -m "Keep workflows alive - $(date -u +'%Y-%m-%d %H:%M:%S UTC')"
            git push
            echo "‚úÖ Keep-alive update committed"
          else
            echo "‚ÑπÔ∏è No changes to commit"
          fi

      - name: Verify scheduled workflows
        run: |
          echo "üìä Scheduled Workflows Status Check"
          echo "===================================="
          echo ""
          echo "‚úÖ news_monitor.yml - Running every 5 minutes"
          echo "‚úÖ health_check.yml - Running daily at 00:00 UTC"
          echo "‚úÖ keep_alive.yml - Running weekly on Monday"
          echo ""
          echo "For more info, visit:"
          echo "https://github.com/${{ github.repository }}/actions"
