# 데이터 업데이트 및 버전 관리 가이드

## 📋 개요

NEW RISK MANAGEMENT 시스템의 핵심 데이터 파일들에 대한 업데이트 절차와 버전 관리 방법을 안내합니다.

## 📁 관리 대상 파일

### 1. master_data.json
- **용도**: 부서별 담당자 정보, 언론사 연락처, 위기 단계 정의
- **업데이트 주기**: 수시 (인사 발령, 조직 개편, 연락처 변경 시)
- **담당자**: 홍보그룹 김우현
- **백업 주기**: 매 업데이트 시 자동

### 2. 언론대응내역.csv
- **용도**: 과거 언론대응 사례 데이터
- **업데이트 주기**: 주 1회 (매주 금요일)
- **담당자**: 각 부서 담당자 → 홍보그룹 취합
- **백업 주기**: 매 업데이트 시 자동

## 🔄 업데이트 절차

### 1단계: 데이터 백업
```bash
# 터미널에서 실행
python data_version_manager.py
```

### 2단계: 파일 수정
- **master_data.json**: JSON 형식 준수하여 직접 편집
- **언론대응내역.csv**: Excel로 편집 후 UTF-8 CSV로 저장

### 3단계: 백업 및 버전 업데이트
```python
from data_version_manager import DataVersionManager

version_manager = DataVersionManager()

# 주요 변경사항 (major): 1.0.0 → 2.0.0
version_manager.create_backup("master_data.json", "조직 개편 반영", "major")

# 일반 변경사항 (minor): 1.0.0 → 1.1.0  
version_manager.create_backup("master_data.json", "신규 부서 추가", "minor")

# 경미한 수정 (patch): 1.0.0 → 1.0.1
version_manager.create_backup("master_data.json", "연락처 업데이트", "patch")
```

### 4단계: 무결성 검사
```python
# 데이터 구조 검증
integrity_results = version_manager.check_data_integrity()
```

## 📝 데이터 입력 규칙

### master_data.json 구조

#### 부서 정보 (departments)
```json
"부서명": {
  "담당자": "이름",              // 필수
  "연락처": "02-XXXX-XXXX",      // 필수
  "이메일": "name@posco-inc.com", // 필수
  "담당이슈": ["키워드1", "키워드2"], // 필수 (배열)
  "키워드": "키워드1, 키워드2",    // 필수 (쉼표 구분)
  "우선순위": 1,                 // 필수 (숫자)
  "활성상태": true,              // 필수 (boolean)
  "최종수정일": "2025-01-01"     // 필수 (YYYY-MM-DD)
}
```

#### 언론사 정보 (media_contacts)
```json
"언론사명": {
  "구분": "종합지|경제지|통신사|석간지|영자지|경제TV|기타온라인",
  "출입기자": ["기자1", "기자2"],
  "담당자": "홍보담당자명"
}
```

### 언론대응내역.csv 구조
| 컬럼명 | 설명 | 예시 |
|--------|------|------|
| 순번 | 일련번호 | 1, 2, 3... |
| 발생 일시 | YYYY-MM-DD | 2025-01-15 |
| 발생 유형 | 이슈 분류 | 기획기사, 보도자료, 기자문의 |
| 현업 부서 | 관련 부서 | IR그룹, 홍보그룹 |
| 단계 | 위기 단계 | 관심, 주의, 위기, 비상 |
| 이슈 발생 보고 | 이슈 내용 | 구체적인 이슈 설명 |
| 대응 결과 | 대응 방법 | 대응 결과 및 후속 조치 |

## 🚨 주의사항

### 데이터 품질 관리
1. **JSON 형식**: master_data.json은 유효한 JSON 형식 유지 필수
2. **인코딩**: 모든 파일은 UTF-8 인코딩으로 저장
3. **특수문자**: 쉼표, 따옴표 등 JSON 특수문자 이스케이프 처리
4. **일관성**: 부서명, 담당자명 등 일관된 표기법 사용

### 보안 고려사항
1. **개인정보**: 담당자 연락처는 업무용만 기재
2. **민감정보**: 내부 기밀 정보는 별도 관리
3. **접근권한**: 파일 수정 권한은 지정된 담당자만 부여

## 📊 버전 관리 규칙

### 버전 번호 체계 (Semantic Versioning)
- **Major (X.0.0)**: 대규모 구조 변경, 조직 개편
- **Minor (0.X.0)**: 신규 부서/언론사 추가, 기능 개선  
- **Patch (0.0.X)**: 연락처 수정, 오타 수정, 데이터 정정

### 백업 보관 정책
- **자동 백업**: 매 업데이트 시 자동 생성
- **보관 기간**: 최근 10개 버전 유지
- **명명 규칙**: `파일명_v버전_YYYYMMDD_HHMMSS.확장자`

## 🔧 문제 해결

### 자주 발생하는 오류

#### JSON 형식 오류
```
문제: "Expecting ',' delimiter" 
해결: JSON 문법 검사기 사용 (jsonlint.com)
```

#### 인코딩 오류  
```
문제: 한글 깨짐
해결: 파일을 UTF-8로 다시 저장
```

#### 데이터 중복
```
문제: 동일한 부서/언론사 중복 등록
해결: 기존 데이터 확인 후 업데이트
```

### 복원 절차
```python
# 이전 버전으로 복원
version_manager.restore_version("master_data.json", "1.2.0")
```

## 📞 지원 연락처

- **시스템 관리**: 홍보그룹 김우현 (kimwoss@poscointl.com)
- **데이터 문의**: 각 부서 담당자
- **기술 지원**: 개발팀

## 📅 정기 점검 일정

- **월 1회**: 전체 데이터 무결성 검사
- **분기 1회**: 부서 정보 갱신 확인  
- **연 2회**: 언론사 연락처 전면 점검
- **수시**: 조직 개편, 인사 발령 시 즉시 반영

---

**최종 업데이트**: 2025년 8월 6일  
**문서 버전**: v1.0.0
