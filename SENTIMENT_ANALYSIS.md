# ë‰´ìŠ¤ ê°ì„± ë¶„ì„ ì‹œìŠ¤í…œ ê¸°ìˆ  ë¬¸ì„œ

## ğŸ“‹ ëª©ì°¨
1. [ê°œìš”](#ê°œìš”)
2. [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
3. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
4. [ë™ì‘ í”„ë¡œì„¸ìŠ¤](#ë™ì‘-í”„ë¡œì„¸ìŠ¤)
5. [ì»´í¬ë„ŒíŠ¸ë³„ ìƒì„¸](#ì»´í¬ë„ŒíŠ¸ë³„-ìƒì„¸)
6. [UI ì ìš©](#ui-ì ìš©)
7. [ì„±ëŠ¥ ìµœì í™”](#ì„±ëŠ¥-ìµœì í™”)

---

## ê°œìš”

### ëª©ì 
ë‰´ìŠ¤ ê¸°ì‚¬ì˜ ê°ì„±(ê¸ì •/ë¶€ì •)ì„ ìë™ìœ¼ë¡œ ë¶„ì„í•˜ì—¬ ì‚¬ìš©ìê°€ ì¤‘ìš”í•œ ë¶€ì • ë‰´ìŠ¤ë¥¼ ì¦‰ì‹œ ì¸ì§€í•  ìˆ˜ ìˆë„ë¡ ì§€ì›

### ì£¼ìš” ê¸°ëŠ¥
- âœ… ê·œì¹™ ê¸°ë°˜ 1ì°¨ ê°ì„± ë¶„ì„ (ì„±ëŠ¥ ìµœì í™”)
- âœ… LLM ê¸°ë°˜ 2ì°¨ ë³´ì • (ì• ë§¤í•œ ê²½ìš°ë§Œ)
- âœ… ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œì— ê°ì„± í†µê³„ í‘œì‹œ
- âœ… ê¸°ì‚¬ ì¹´ë“œì— ì‹œê°ì  ê°ì„± í‘œì‹œ (dot)
- âœ… í…”ë ˆê·¸ë¨ ì•Œë¦¼ì— ê°ì„± ì´ëª¨ì§€ í‘œì‹œ

---

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ë‰´ìŠ¤ ìˆ˜ì§‘ (Naver API)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              1ì°¨: ê·œì¹™ ê¸°ë°˜ ê°ì„± ë¶„ì„                          â”‚
â”‚  - ë¶€ì • í‚¤ì›Œë“œ: ì˜í˜¹, ë…¼ë€, ìˆ˜ì‚¬, ê³ ë°œ, ì œì¬ ë“± (32ê°œ)         â”‚
â”‚  - ê¸ì • í‚¤ì›Œë“œ: í˜‘ë ¥, í™•ëŒ€, íˆ¬ì, ìˆ˜ì£¼, ê³„ì•½ ë“± (28ê°œ)         â”‚
â”‚  - íŒì •: pos (ê¸ì •/ì¤‘ë¦½) / neg (ë¶€ì •) / unk (ì• ë§¤í•¨)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚   íŒì • ê²°ê³¼ í™•ì¸      â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚             â”‚
        â–¼             â–¼             â–¼
    pos/neg         unk          ìºì‹œ í™•ì¸
        â”‚             â”‚             â”‚
        â”‚             â–¼             â”‚
        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
        â”‚   â”‚ 2ì°¨: LLM ë³´ì •    â”‚    â”‚
        â”‚   â”‚ (OpenAI API)    â”‚    â”‚
        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
        â”‚            â”‚             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  sentiment í•„ë“œ ì €ì¥    â”‚
        â”‚  - pos: ê¸ì •/ì¤‘ë¦½       â”‚
        â”‚  - neg: ë¶€ì •           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚            â”‚            â”‚
    â–¼            â–¼            â–¼
 ëŒ€ì‹œë³´ë“œ      ê¸°ì‚¬ ì¹´ë“œ    í…”ë ˆê·¸ë¨
 í†µê³„ í‘œì‹œ     dot í‘œì‹œ     ì´ëª¨ì§€
```

---

## ê¸°ìˆ  ìŠ¤íƒ

### í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
| ë¼ì´ë¸ŒëŸ¬ë¦¬ | ìš©ë„ | ë²„ì „ |
|-----------|------|------|
| pandas | ë°ì´í„° ì²˜ë¦¬ | latest |
| requests | API í˜¸ì¶œ (OpenAI) | latest |
| streamlit | ì›¹ UI í”„ë ˆì„ì›Œí¬ | latest |

### ì™¸ë¶€ API
| API | ìš©ë„ | ëª¨ë¸ |
|-----|------|------|
| OpenAI API | LLM ê¸°ë°˜ ê°ì„± ë¶„ì„ | gpt-4o-mini |
| Naver News API | ë‰´ìŠ¤ ìˆ˜ì§‘ | - |
| Telegram Bot API | ì•Œë¦¼ ì „ì†¡ | - |

### ë°ì´í„° êµ¬ì¡°
```python
# ê¸°ì‚¬ ë°ì´í„° êµ¬ì¡°
{
    "ë‚ ì§œ": "2026-01-15 10:00",
    "ë§¤ì²´ëª…": "ì—°í•©ë‰´ìŠ¤",
    "ê²€ìƒ‰í‚¤ì›Œë“œ": "í¬ìŠ¤ì½”",
    "ê¸°ì‚¬ì œëª©": "í¬ìŠ¤ì½” íˆ¬ì í™•ëŒ€",
    "ì£¼ìš”ê¸°ì‚¬ ìš”ì•½": "ìƒˆë¡œìš´ ê³„ì•½ ì²´ê²°",
    "URL": "https://...",
    "sentiment": "pos"  # pos / neg
}
```

---

## ë™ì‘ í”„ë¡œì„¸ìŠ¤

### 1. ë‰´ìŠ¤ ìˆ˜ì§‘ ë‹¨ê³„ (news_collector.py)

#### crawl_naver_news()
```python
def crawl_naver_news(query: str, max_items: int = 200) -> pd.DataFrame:
    """
    1. Naver APIë¡œ ë‰´ìŠ¤ ê²€ìƒ‰
    2. ê° ê¸°ì‚¬ë§ˆë‹¤ ê°ì„± ë¶„ì„ ìˆ˜í–‰
       - get_article_sentiment(title, summary, url)
    3. sentiment í•„ë“œì™€ í•¨ê»˜ DataFrame ë°˜í™˜
    """
```

**í”„ë¡œì„¸ìŠ¤:**
1. Naver API í˜¸ì¶œ â†’ ê¸°ì‚¬ ìˆ˜ì§‘
2. ê° ê¸°ì‚¬ë³„ë¡œ `get_article_sentiment()` í˜¸ì¶œ
3. sentiment í•„ë“œ ì¶”ê°€í•˜ì—¬ DataFrame ìƒì„±
4. CSV ì €ì¥ ì‹œ sentiment ì»¬ëŸ¼ í¬í•¨

---

### 2. ê°ì„± ë¶„ì„ ë‹¨ê³„ (news_collector.py)

#### 2-1. ê·œì¹™ ê¸°ë°˜ ë¶„ì„ (1ì°¨)

```python
def analyze_sentiment_rule_based(title: str, summary: str) -> str:
    """
    í‚¤ì›Œë“œ ê¸°ë°˜ ê°ì„± íŒì •

    ë¡œì§:
    1. ì œëª© + ìš”ì•½ í…ìŠ¤íŠ¸ë¥¼ ì†Œë¬¸ìë¡œ ë³€í™˜
    2. ë¶€ì • í‚¤ì›Œë“œ ê°œìˆ˜ ì¹´ìš´íŠ¸ (neg_count)
    3. ê¸ì • í‚¤ì›Œë“œ ê°œìˆ˜ ì¹´ìš´íŠ¸ (pos_count)
    4. íŒì • ê·œì¹™ ì ìš©:
       - neg_count >= 2 â†’ "neg"
       - neg_count == 1 and pos_count == 0 â†’ "neg"
       - pos_count >= 1 and neg_count == 0 â†’ "pos"
       - pos_count > neg_count â†’ "pos"
       - neg_count > pos_count â†’ "neg"
       - ê·¸ ì™¸ â†’ "unk" (ì• ë§¤í•¨)
    """
```

**ë¶€ì • í‚¤ì›Œë“œ (32ê°œ):**
```
ì˜í˜¹, ë…¼ë€, ìˆ˜ì‚¬, ê³ ë°œ, ì œì¬, ì‚¬ê³ , í­ë°œ, ì¤‘ë‹¨, ì‹¤íŒ¨,
ì ì, ê¸‰ë½, ë¶ˆë²•, ë°°ì„, íš¡ë ¹, ë‹´í•©, ìœ„ë°˜, ì²˜ë²Œ, íŒŒì‚°,
í•´ê³ , ê°ì¶•, ì ë°œ, ê¸°ì†Œ, ë²Œê¸ˆ, ì†ì‹¤, í•˜ë½, ì·¨ì†Œ, ì² íšŒ,
ë¬¸ì œ, ìš°ë ¤, ë¹„íŒ, ë°˜ë°œ, ê°ˆë“±, ì¶©ëŒ, ë¶€ì‹¤, ì§€ì—°
```

**ê¸ì • í‚¤ì›Œë“œ (28ê°œ):**
```
í˜‘ë ¥, í™•ëŒ€, íˆ¬ì, ìˆ˜ì£¼, ê³„ì•½, ì§„ì¶œ, ì„±ê³¼, ê°œì„ , ìƒìŠ¹,
í˜ì‹ , ì¶œì‹œ, ìˆ˜ìƒ, ì„ ì •, ì±„íƒ, ì¦ê°€, ì„±ì¥, ë‹¬ì„±, ìˆ˜ìµ,
ê°œë°œ, íšë“, ì²´ê²°, ì¦ì„¤, í™•ë³´, ê¸°ì—¬, ì°½ì¶œ, ë„ì…, ê°•í™”
```

#### 2-2. LLM ê¸°ë°˜ ë³´ì • (2ì°¨)

```python
def analyze_sentiment_llm(title: str, summary: str) -> str:
    """
    OpenAI APIë¥¼ í†µí•œ LLM ê°ì„± ë¶„ì„

    í”„ë¡œì„¸ìŠ¤:
    1. OpenAI API í‚¤ í™•ì¸
    2. í”„ë¡¬í”„íŠ¸ êµ¬ì„±:
       "ë‹¤ìŒ ë‰´ìŠ¤ ê¸°ì‚¬ê°€ ê¸°ì—…ì—ê²Œ ê¸ì •ì ì¸ì§€ ë¶€ì •ì ì¸ì§€ íŒë‹¨í•´ì£¼ì„¸ìš”.
        ì œëª©: {title}
        ìš”ì•½: {summary}
        ë‹µë³€ì€ 'ê¸ì •' ë˜ëŠ” 'ë¶€ì •' ì¤‘ í•˜ë‚˜ë§Œ ì¶œë ¥í•˜ì„¸ìš”."
    3. gpt-4o-mini ëª¨ë¸ í˜¸ì¶œ (temperature=0.2, max_tokens=10)
    4. ì‘ë‹µ íŒŒì‹±:
       - "ë¶€ì •" ë˜ëŠ” "negative" í¬í•¨ â†’ "neg"
       - "ê¸ì •" ë˜ëŠ” "positive" í¬í•¨ â†’ "pos"
       - ê¸°íƒ€ â†’ "unk"
    5. ì—ëŸ¬ ë°œìƒ ì‹œ â†’ "unk" ë°˜í™˜ (ì•ˆì „ ì¥ì¹˜)
    """
```

**API ì„¤ì •:**
- ëª¨ë¸: `gpt-4o-mini` (ë¹„ìš© íš¨ìœ¨ì )
- Temperature: `0.2` (ì¼ê´€ëœ ê²°ê³¼)
- Max Tokens: `10` (ì§§ì€ ì‘ë‹µë§Œ í•„ìš”)
- Timeout: `10ì´ˆ` (ë¹ ë¥¸ ì‘ë‹µ)

#### 2-3. í†µí•© ë¶„ì„ í•¨ìˆ˜

```python
def get_article_sentiment(title: str, summary: str, url: str = "") -> str:
    """
    ê°ì„± ë¶„ì„ í†µí•© í•¨ìˆ˜ (ìºì‹± í¬í•¨)

    í”„ë¡œì„¸ìŠ¤:
    1. ìºì‹œ í™•ì¸ (URL ë˜ëŠ” title+summary ê¸°ë°˜)
       â””â”€ ìºì‹œ Hit â†’ ì¦‰ì‹œ ë°˜í™˜
    2. 1ì°¨: ê·œì¹™ ê¸°ë°˜ ë¶„ì„
       â””â”€ ê²°ê³¼ê°€ pos/neg â†’ ìºì‹œ ì €ì¥ í›„ ë°˜í™˜
    3. 2ì°¨: unkì¸ ê²½ìš°ë§Œ LLM í˜¸ì¶œ
       â””â”€ LLM ê²°ê³¼ (pos/neg/unk)
    4. LLMë„ unk ë°˜í™˜ ì‹œ â†’ "pos"ë¡œ ê¸°ë³¸ ì²˜ë¦¬ (ì¤‘ë¦½)
    5. ìºì‹œì— ì €ì¥ í›„ ë°˜í™˜
    """
```

**ìºì‹± ì „ëµ:**
- ìºì‹œ í‚¤: URL (ìš°ì„ ) ë˜ëŠ” `{title}|{summary}`
- ì €ì¥ ìœ„ì¹˜: ë©”ëª¨ë¦¬ (`_sentiment_cache` dict)
- íš¨ê³¼: Streamlit rerun ì‹œ ì¬ë¶„ì„ ë°©ì§€

---

### 3. ì‹ ê·œ ê¸°ì‚¬ ê°ì§€ ë‹¨ê³„ (news_collector.py)

#### detect_new_articles()
```python
def detect_new_articles(old_df, new_df, sent_cache) -> list:
    """
    ì‹ ê·œ ê¸°ì‚¬ ê°ì§€ ë° sentiment í¬í•¨

    í”„ë¡œì„¸ìŠ¤:
    1. DBì™€ ìƒˆ ë°ì´í„° ë¹„êµ
    2. ì¤‘ë³µ ì œê±° (URL, ì •ê·œí™” URL, í•´ì‹œ ID ê¸°ë°˜)
    3. ì‹ ê·œ ê¸°ì‚¬ ë¦¬ìŠ¤íŠ¸ ìƒì„± ì‹œ sentiment í•„ë“œ í¬í•¨:
       {
           "title": "...",
           "link": "...",
           "date": "...",
           "press": "...",
           "keyword": "...",
           "sentiment": "pos"  # ì¶”ê°€ë¨
       }
    4. Pending íë¡œ ì „ë‹¬
    """
```

---

### 4. í…”ë ˆê·¸ë¨ ì•Œë¦¼ ë‹¨ê³„ (news_collector.py)

#### add_to_pending()
```python
def add_to_pending(article: dict, pending_queue: dict) -> dict:
    """
    Pending íì— ê¸°ì‚¬ ì¶”ê°€ (sentiment í¬í•¨)

    ì €ì¥ êµ¬ì¡°:
    {
        "title": "...",
        "link": "...",
        "date": "...",
        "press": "...",
        "keyword": "...",
        "sentiment": "pos",  # ì¶”ê°€ë¨
        "retry_count": 0,
        "last_attempt": "2026-01-15T10:00:00",
        "hash_id": "..."
    }
    """
```

#### process_pending_queue_and_send()
```python
def process_pending_queue_and_send(pending_queue, sent_cache) -> tuple:
    """
    í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ ì „ì†¡ (ê°ì„± ì´ëª¨ì§€ í¬í•¨)

    í”„ë¡œì„¸ìŠ¤:
    1. Pending íì—ì„œ ê¸°ì‚¬ ê°€ì ¸ì˜¤ê¸°
    2. sentiment ê°’ í™•ì¸
    3. ì´ëª¨ì§€ ì„ íƒ:
       - sentiment == "neg" â†’ ğŸ”´
       - sentiment == "pos" â†’ ğŸŸ¢
    4. ë©”ì‹œì§€ êµ¬ì„±:
       ğŸ”´ ìƒˆ ë‰´ìŠ¤

       #í¬ìŠ¤ì½”
       [ì—°í•©ë‰´ìŠ¤] í¬ìŠ¤ì½” ë…¼ë€ ë°œìƒ
       ğŸ• 2026-01-15 10:00
       ğŸ”— https://...
    5. í…”ë ˆê·¸ë¨ API ì „ì†¡
    """
```

---

## ì»´í¬ë„ŒíŠ¸ë³„ ìƒì„¸

### 1. news_collector.py

#### ì£¼ìš” í•¨ìˆ˜

| í•¨ìˆ˜ëª… | ì—­í•  | ì…ë ¥ | ì¶œë ¥ |
|--------|------|------|------|
| `analyze_sentiment_rule_based()` | ê·œì¹™ ê¸°ë°˜ 1ì°¨ ë¶„ì„ | title, summary | pos/neg/unk |
| `analyze_sentiment_llm()` | LLM ê¸°ë°˜ 2ì°¨ ë³´ì • | title, summary | pos/neg/unk |
| `get_article_sentiment()` | í†µí•© ê°ì„± ë¶„ì„ (ìºì‹±) | title, summary, url | pos/neg |
| `crawl_naver_news()` | ë‰´ìŠ¤ ìˆ˜ì§‘ + ê°ì„± ë¶„ì„ | query, max_items | DataFrame (sentiment í¬í•¨) |
| `detect_new_articles()` | ì‹ ê·œ ê¸°ì‚¬ ê°ì§€ | old_df, new_df, cache | list (sentiment í¬í•¨) |
| `add_to_pending()` | Pending í ì¶”ê°€ | article dict | updated queue |
| `process_pending_queue_and_send()` | í…”ë ˆê·¸ë¨ ì „ì†¡ | queue, cache | (queue, cache, count) |

---

### 2. streamlit_app.py

#### ê¸°ì‚¬ ì¹´ë“œ ë Œë”ë§

```python
# streamlit_app.py (3058-3094ë²ˆ ì¤„)

for i, (_, row) in enumerate(df_show.iterrows()):
    sentiment = str(row.get("sentiment", "pos"))

    # ê°ì„± dot ì„¤ì •
    if sentiment == "neg":
        sentiment_dot = '<span style="...background:#ef4444..."></span>'  # ğŸ”´
    else:
        sentiment_dot = '<span style="...background:#22c55e..."></span>'  # ğŸŸ¢

    # HTML ë Œë”ë§
    st.markdown(f"""
    <div class="news-card">
      <div class="news-header">
        <div class="news-left">
          {sentiment_dot}<span class="news-media">{media}</span>
          <span class="news-key">#{keyword}</span>
        </div>
      </div>
      ...
    </div>
    """, unsafe_allow_html=True)
```

**CSS ìŠ¤íƒ€ì¼:**
```css
/* 8px ì›í˜• dot */
display: inline-block;
width: 8px;
height: 8px;
border-radius: 50%;
background: #22c55e;  /* ì´ˆë¡ (ê¸ì •) */
background: #ef4444;  /* ë¹¨ê°• (ë¶€ì •) */
margin-right: 6px;
vertical-align: middle;
```

---

### 3. components/news_dashboard.py

#### ëŒ€ì‹œë³´ë“œ í†µê³„

```python
# ì¹´í…Œê³ ë¦¬ë³„ sentiment ì¹´ìš´íŒ…
for _, row in today_news.iterrows():
    sentiment = str(row.get("sentiment", "pos"))
    is_pos = sentiment == "pos"
    is_neg = sentiment == "neg"

    # ì „ì²´ ì¹´ìš´íŠ¸
    if is_pos:
        total_pos += 1
    elif is_neg:
        total_neg += 1

    # ì¹´í…Œê³ ë¦¬ë³„ ì¹´ìš´íŠ¸ (ì˜ˆ: í¬ìŠ¤ì½”ì¸í„°ë‚´ì…”ë„)
    if is_í¬ìŠ¤ì½”ì¸í„°:
        posco_intl_count += 1
        if is_pos:
            posco_intl_pos += 1
        elif is_neg:
            posco_intl_neg += 1
```

#### UI ë Œë”ë§

```html
<!-- ë‹¹ì¼ ê¸°ì‚¬ ì¹´ë“œ ì˜ˆì‹œ -->
<div class="news-card total">
    <div class="news-label">ë‹¹ì¼ ê¸°ì‚¬</div>
    <div class="news-value">21</div>
    <div class="news-sentiment">
        <div class="news-sentiment-item">
            <span class="news-sentiment-dot pos"></span>  <!-- ğŸŸ¢ -->
            <span class="news-sentiment-count">20</span>
        </div>
        <div class="news-sentiment-item">
            <span class="news-sentiment-dot neg"></span>  <!-- ğŸ”´ -->
            <span class="news-sentiment-count">1</span>
        </div>
    </div>
</div>
```

**CSS ìŠ¤íƒ€ì¼:**
```css
.news-sentiment {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    font-size: 0.65rem;
    margin-top: 4px;
    opacity: 0.8;
}

.news-sentiment-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    display: inline-block;
}

.news-sentiment-dot.pos { background: #22c55e; }  /* ì´ˆë¡ */
.news-sentiment-dot.neg { background: #ef4444; }  /* ë¹¨ê°• */
```

---

## UI ì ìš©

### 1. ëŒ€ì‹œë³´ë“œ (ìƒë‹¨)

**ìœ„ì¹˜:** ë‰´ìŠ¤ ëª¨ë‹ˆí„°ë§ ë©”ë‰´ ìƒë‹¨

**í‘œì‹œ ë‚´ìš©:**
- ì „ì²´ ë‹¹ì¼ ê¸°ì‚¬: `21` â†’ ğŸŸ¢ 20 ğŸ”´ 1
- ê° ì¹´í…Œê³ ë¦¬ë³„:
  - #í¬ìŠ¤ì½”ì¸í„°ë‚´ì…”ë„: `8` â†’ ğŸŸ¢ 7 ğŸ”´ 1
  - #í¬ìŠ¤ì½”: `5` â†’ ğŸŸ¢ 5 ğŸ”´ 0
  - #í¬ìŠ¤ì½”ëª¨ë¹Œë¦¬í‹°ì†”ë£¨ì…˜: `3` â†’ ğŸŸ¢ 3 ğŸ”´ 0
  - #ì‚¼ì²™ë¸”ë£¨íŒŒì›Œ: `2` â†’ ğŸŸ¢ 2 ğŸ”´ 0
  - #ê¸°íƒ€: `3` â†’ ğŸŸ¢ 3 ğŸ”´ 0

**íŒŒì¼:** `components/news_dashboard.py`

---

### 2. ê¸°ì‚¬ ì¹´ë“œ (ë³¸ë¬¸)

**ìœ„ì¹˜:** ê¸°ì‚¬ ëª©ë¡ì˜ ê° ì¹´ë“œ

**í‘œì‹œ ìœ„ì¹˜:** ë§¤ì²´ëª… ì• (ì™¼ìª½ ìƒë‹¨)

**ì˜ˆì‹œ:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŸ¢ ì—°í•©ë‰´ìŠ¤ #í¬ìŠ¤ì½”    2026-01-15   â”‚
â”‚                                     â”‚
â”‚ í¬ìŠ¤ì½” íˆ¬ì í™•ëŒ€                     â”‚
â”‚ ìƒˆë¡œìš´ ê³µì¥ ê±´ì„¤ ê³„ì•½ ì²´ê²°...        â”‚
â”‚                                     â”‚
â”‚ ğŸ”— https://...  ğŸ“„ ë³´ê³ ì„œ ìƒì„±      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**íŒŒì¼:** `streamlit_app.py` (3058-3094ë²ˆ ì¤„)

---

### 3. í…”ë ˆê·¸ë¨ ì•Œë¦¼

**ë©”ì‹œì§€ í˜•ì‹:**

**ë¶€ì • ë‰´ìŠ¤:**
```
ğŸ”´ ìƒˆ ë‰´ìŠ¤

#í¬ìŠ¤ì½”
[ì—°í•©ë‰´ìŠ¤] í¬ìŠ¤ì½” ìˆ˜ì‚¬ ì°©ìˆ˜
ğŸ• 2026-01-15 10:00
ğŸ”— https://...
```

**ê¸ì • ë‰´ìŠ¤:**
```
ğŸŸ¢ ìƒˆ ë‰´ìŠ¤

#í¬ìŠ¤ì½”
[ì—°í•©ë‰´ìŠ¤] í¬ìŠ¤ì½” íˆ¬ì í™•ëŒ€
ğŸ• 2026-01-15 10:00
ğŸ”— https://...
```

**íŒŒì¼:** `news_collector.py` (1135-1148ë²ˆ ì¤„)

---

## ì„±ëŠ¥ ìµœì í™”

### 1. 2ë‹¨ê³„ ë¶„ì„ ì „ëµ

**ëª©í‘œ:** LLM í˜¸ì¶œ ìµœì†Œí™”ë¡œ ë¹„ìš© ì ˆê°

**ë°©ë²•:**
1. 1ì°¨: ê·œì¹™ ê¸°ë°˜ (ë¬´ë£Œ, ë¹ ë¦„)
   - ì•½ 70-80%ì˜ ê¸°ì‚¬ë¥¼ ëª…í™•í•˜ê²Œ ë¶„ë¥˜
2. 2ì°¨: LLM ë³´ì • (ìœ ë£Œ, ëŠë¦¼)
   - ì• ë§¤í•œ ê²½ìš°(unk)ë§Œ í˜¸ì¶œ (ì•½ 20-30%)

**íš¨ê³¼:**
- LLM í˜¸ì¶œ 70-80% ê°ì†Œ
- í‰ê·  ë¶„ì„ ì‹œê°„ 50% ì´ìƒ ë‹¨ì¶•
- API ë¹„ìš© 70-80% ì ˆê°

---

### 2. ìºì‹± ì „ëµ

**ìºì‹œ êµ¬ì¡°:**
```python
_sentiment_cache = {
    "https://news.example.com/article1": "pos",
    "https://news.example.com/article2": "neg",
    "ì œëª©|ìš”ì•½": "pos"
}
```

**ìºì‹œ í‚¤ ìš°ì„ ìˆœìœ„:**
1. URL (ìˆëŠ” ê²½ìš°)
2. `{title}|{summary}` (URL ì—†ëŠ” ê²½ìš°)

**íš¨ê³¼:**
- Streamlit rerun ì‹œ ì¬ë¶„ì„ ë°©ì§€
- ë™ì¼ ê¸°ì‚¬ ì¤‘ë³µ ë¶„ì„ ë°©ì§€
- ì‘ë‹µ ì†ë„ 100ë°° ì´ìƒ í–¥ìƒ (ìºì‹œ Hit ì‹œ)

---

### 3. ë°°ì¹˜ ì²˜ë¦¬

**êµ¬í˜„:**
```python
# crawl_naver_news()ì—ì„œ í•œ ë²ˆì— ì²˜ë¦¬
for article in articles:
    sentiment = get_article_sentiment(title, summary, url)
    article['sentiment'] = sentiment
```

**íš¨ê³¼:**
- ë‰´ìŠ¤ ìˆ˜ì§‘ ì‹œ í•œ ë²ˆì— ëª¨ë“  ê¸°ì‚¬ ë¶„ì„ ì™„ë£Œ
- UI ë Œë”ë§ ì‹œ ì¶”ê°€ ë¶„ì„ ë¶ˆí•„ìš”
- ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ (ë¡œë”© ì‹œê°„ ì—†ìŒ)

---

### 4. LLM API ìµœì í™”

**ì„¤ì •:**
- ëª¨ë¸: `gpt-4o-mini` (ê°€ì¥ ì €ë ´í•œ ëª¨ë¸)
- Temperature: `0.2` (ì¼ê´€ì„± ìš°ì„ )
- Max Tokens: `10` (ìµœì†Œí•œì˜ í† í°ë§Œ ì‚¬ìš©)
- Timeout: `10ì´ˆ` (ë¹ ë¥¸ ì‹¤íŒ¨)

**ë¹„ìš© ì ˆê°:**
- GPT-4 ëŒ€ë¹„ ì•½ 100ë°° ì €ë ´
- ìµœì†Œ í† í° ì‚¬ìš©ìœ¼ë¡œ ì¶”ê°€ ì ˆê°

---

## ë°ì´í„° íë¦„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Naver API    â”‚
â”‚ ë‰´ìŠ¤ ìˆ˜ì§‘     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ title, summary
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ get_article_sentimentâ”‚
â”‚ (ìºì‹± + 2ë‹¨ê³„ ë¶„ì„)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ sentiment (pos/neg)
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DataFrame ìƒì„±        â”‚
â”‚ + sentiment ì»¬ëŸ¼     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚             â”‚              â”‚
       â–¼             â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CSV ì €ì¥  â”‚  â”‚ ëŒ€ì‹œë³´ë“œ  â”‚  â”‚ ê¸°ì‚¬ ì¹´ë“œ â”‚
â”‚          â”‚  â”‚ í†µê³„ í‘œì‹œ â”‚  â”‚ dot í‘œì‹œ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ detect_new_articlesâ”‚
â”‚ (ì‹ ê·œ ê¸°ì‚¬ ê°ì§€)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ new_articles (sentiment í¬í•¨)
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ add_to_pending   â”‚
â”‚ (pending í)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ process_pending_queue_   â”‚
â”‚ and_send                 â”‚
â”‚ (í…”ë ˆê·¸ë¨ ì „ì†¡)           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ ğŸŸ¢/ğŸ”´ ì´ëª¨ì§€
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Telegram     â”‚
â”‚ ì•Œë¦¼ ì „ì†¡     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## í™˜ê²½ ë³€ìˆ˜

### í•„ìˆ˜ ì„¤ì •

```bash
# .env íŒŒì¼

# OpenAI API (LLM ê°ì„± ë¶„ì„ìš©)
OPENAI_API_KEY=sk-...

# Naver News API (ë‰´ìŠ¤ ìˆ˜ì§‘ìš©)
NAVER_CLIENT_ID=...
NAVER_CLIENT_SECRET=...

# Telegram Bot (ì•Œë¦¼ìš©)
TELEGRAM_BOT_TOKEN=...
TELEGRAM_CHAT_ID=...
```

---

## ì—ëŸ¬ í•¸ë“¤ë§

### 1. LLM API ì‹¤íŒ¨ ì‹œ

```python
try:
    sentiment = analyze_sentiment_llm(title, summary)
except Exception as e:
    print(f"[DEBUG] LLM ê°ì„± ë¶„ì„ ì˜¤ë¥˜: {e}")
    return "unk"  # ì•ˆì „ ì¥ì¹˜
```

**í´ë°± ì „ëµ:**
- LLM ì‹¤íŒ¨ â†’ "unk" ë°˜í™˜
- `get_article_sentiment()`ì—ì„œ "unk" â†’ "pos"ë¡œ ì²˜ë¦¬
- ê²°ê³¼: ì—ëŸ¬ê°€ ë°œìƒí•´ë„ ì‹œìŠ¤í…œ ì¤‘ë‹¨ ì—†ìŒ

### 2. ë„¤íŠ¸ì›Œí¬ íƒ€ì„ì•„ì›ƒ

```python
response = requests.post(
    "https://api.openai.com/v1/chat/completions",
    headers=headers,
    json=payload,
    timeout=10  # 10ì´ˆ íƒ€ì„ì•„ì›ƒ
)
```

**íš¨ê³¼:**
- ëŠë¦° ì‘ë‹µìœ¼ë¡œ ì¸í•œ ë¬´í•œ ëŒ€ê¸° ë°©ì§€
- ë¹ ë¥¸ ì‹¤íŒ¨ (fail-fast)

### 3. ìºì‹œ ë¯¸ìŠ¤

```python
# ìºì‹œ í™•ì¸
cache_key = url if url else f"{title}|{summary}"
if cache_key in _sentiment_cache:
    return _sentiment_cache[cache_key]

# ìºì‹œ ë¯¸ìŠ¤ â†’ ì •ìƒ ë¶„ì„ ì§„í–‰
sentiment = analyze_sentiment_rule_based(title, summary)
```

**íš¨ê³¼:**
- ìºì‹œ ë¯¸ìŠ¤ ì‹œì—ë„ ì •ìƒ ë™ì‘
- ì„±ëŠ¥ ì €í•˜ ì—†ìŒ

---

## í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### 1. ë¶€ì • ë‰´ìŠ¤ í…ŒìŠ¤íŠ¸

**ì…ë ¥:**
```python
title = "í¬ìŠ¤ì½” ë…¼ë€ ë°œìƒ"
summary = "ìˆ˜ì‚¬ ì°©ìˆ˜ ë° ê³ ë°œ ì˜í˜¹"
```

**ì˜ˆìƒ ê²°ê³¼:**
- 1ì°¨ ë¶„ì„: `neg` (í‚¤ì›Œë“œ: ë…¼ë€, ìˆ˜ì‚¬, ê³ ë°œ)
- ìµœì¢… ê²°ê³¼: `neg`
- UI: ğŸ”´ ë¹¨ê°„ dot
- í…”ë ˆê·¸ë¨: ğŸ”´ ìƒˆ ë‰´ìŠ¤

### 2. ê¸ì • ë‰´ìŠ¤ í…ŒìŠ¤íŠ¸

**ì…ë ¥:**
```python
title = "í¬ìŠ¤ì½” íˆ¬ì í™•ëŒ€"
summary = "ìƒˆë¡œìš´ ê³„ì•½ ì²´ê²° ì„±ê³¼"
```

**ì˜ˆìƒ ê²°ê³¼:**
- 1ì°¨ ë¶„ì„: `pos` (í‚¤ì›Œë“œ: íˆ¬ì, ê³„ì•½, ì„±ê³¼)
- ìµœì¢… ê²°ê³¼: `pos`
- UI: ğŸŸ¢ ì´ˆë¡ dot
- í…”ë ˆê·¸ë¨: ğŸŸ¢ ìƒˆ ë‰´ìŠ¤

### 3. ì• ë§¤í•œ ë‰´ìŠ¤ í…ŒìŠ¤íŠ¸

**ì…ë ¥:**
```python
title = "í¬ìŠ¤ì½” íšŒì˜ ê°œìµœ"
summary = "ì„ì› íšŒì˜ ì§„í–‰"
```

**ì˜ˆìƒ ê²°ê³¼:**
- 1ì°¨ ë¶„ì„: `unk` (í‚¤ì›Œë“œ ë§¤ì¹­ ì—†ìŒ)
- 2ì°¨ LLM í˜¸ì¶œ
- ìµœì¢… ê²°ê³¼: `pos` (LLM íŒë‹¨ ë˜ëŠ” ê¸°ë³¸ê°’)
- UI: ğŸŸ¢ ì´ˆë¡ dot

---

## í–¥í›„ ê°œì„  ë°©ì•ˆ

### 1. í•™ìŠµ ë°ì´í„° ìˆ˜ì§‘
- ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘ (ê¸ì •/ë¶€ì • ìˆ˜ë™ ìˆ˜ì •)
- ìˆ˜ì§‘ëœ ë°ì´í„°ë¡œ ê·œì¹™ ê°œì„ 
- í‚¤ì›Œë“œ ê°€ì¤‘ì¹˜ ì¡°ì •

### 2. ëª¨ë¸ ì—…ê·¸ë ˆì´ë“œ
- Fine-tuningëœ ê°ì„± ë¶„ì„ ëª¨ë¸ ë„ì…
- í•œêµ­ì–´ íŠ¹í™” ëª¨ë¸ (KoBERT ë“±) ê³ ë ¤
- ë„ë©”ì¸ íŠ¹í™” í•™ìŠµ (ê²½ì œ/ê¸°ì—… ë‰´ìŠ¤)

### 3. ë‹¤ë‹¨ê³„ ê°ì„± ë¶„ì„
- í˜„ì¬: ê¸ì •/ë¶€ì • 2ë‹¨ê³„
- ê°œì„ : ë§¤ìš° ê¸ì • / ê¸ì • / ì¤‘ë¦½ / ë¶€ì • / ë§¤ìš° ë¶€ì • (5ë‹¨ê³„)
- UI: ìƒ‰ìƒ ê·¸ë¼ë°ì´ì…˜ (ğŸŸ¢ â†’ ğŸŸ¡ â†’ ğŸ”´)

### 4. ì‹¤ì‹œê°„ ì•Œë¦¼ ê°•í™”
- ë¶€ì • ë‰´ìŠ¤ ë°œìƒ ì‹œ ì¦‰ì‹œ ì•Œë¦¼
- ê¸ì • ë‰´ìŠ¤ëŠ” ë°°ì¹˜ ì „ì†¡
- ìš°ì„ ìˆœìœ„ ê¸°ë°˜ ì•Œë¦¼ (ì¤‘ìš”ë„ ì ìˆ˜)

---

## ë¼ì´ì„¼ìŠ¤

ì´ ë¬¸ì„œëŠ” í”„ë¡œì íŠ¸ì˜ ì¼ë¶€ë¡œ ì œê³µë©ë‹ˆë‹¤.

---

## ë¬¸ì˜

ê¸°ìˆ ì  ì§ˆë¬¸ì´ë‚˜ ê°œì„  ì œì•ˆì€ GitHub Issuesë¡œ ë“±ë¡í•´ì£¼ì„¸ìš”.

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸:** 2026-01-15
**ì‘ì„±ì:** Claude Code (Claude Sonnet 4.5)
