# 📱 텔레그램 그룹 채팅방으로 뉴스 받기 설정 가이드

현재 개인 메시지로 받고 있는 뉴스를 **그룹 채팅방**으로 변경하는 방법입니다.

---

## 🎯 그룹 채팅의 장점

- ✅ **여러 명이 동시에** 뉴스 확인
- ✅ **팀원들과 공유** 가능
- ✅ **토론 및 의견 교환** 가능
- ✅ 개인 메시지함 깔끔하게 유지

---

## 📋 설정 단계

### **1단계: 텔레그램 그룹 생성**

1. **텔레그램 앱 열기**

2. **새 그룹 만들기**
   - 모바일: 우측 상단 연필 아이콘 → "새 그룹"
   - 데스크톱: 좌측 상단 메뉴 → "새 그룹"

3. **그룹 이름 입력**
   - 예: "포스코 뉴스 모니터링"
   - 예: "POSCO News Alert"

4. **멤버 추가** (선택사항)
   - 팀원들을 추가하거나
   - 나중에 초대 링크로 추가 가능

---

### **2단계: 봇을 그룹에 추가**

1. **그룹 채팅방 열기**

2. **멤버 추가**
   - 모바일: 그룹 이름 클릭 → "멤버 추가"
   - 데스크톱: 우측 멤버 목록 → "멤버 추가"

3. **봇 검색 및 추가**
   - 검색창에 봇 username 입력
   - 예: `@posco_news_bot` (BotFather에서 만든 봇)
   - 봇 선택 → "추가" 클릭

4. **봇에게 관리자 권한 부여** (선택사항)
   - 그룹 설정 → 관리자 → 봇 추가
   - 권한: "메시지 보내기" 만 체크하면 됨

---

### **3단계: 그룹 Chat ID 확인**

#### **방법 A: 봇에게 메시지 보내기 (가장 쉬움)**

1. **그룹에서 봇 멘션**
   ```
   @your_bot_name 안녕
   ```
   또는 아무 메시지나 전송

2. **브라우저에서 확인**
   ```
   https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getUpdates
   ```
   - `<YOUR_BOT_TOKEN>`을 실제 봇 토큰으로 교체

3. **Chat ID 찾기**
   ```json
   {
     "ok": true,
     "result": [
       {
         "message": {
           "chat": {
             "id": -1001234567890,  ← 이게 그룹 Chat ID!
             "title": "포스코 뉴스 모니터링",
             "type": "supergroup"
           }
         }
       }
     ]
   }
   ```

   ⚠️ **중요:** 그룹 Chat ID는 **마이너스(-)로 시작**합니다!

#### **방법 B: 전용 봇 사용**

1. 그룹에 `@getidsbot` 추가

2. 봇이 자동으로 그룹 ID 표시
   ```
   This group's ID: -1001234567890
   ```

3. Chat ID 복사

---

### **4단계: Streamlit Cloud 설정 업데이트**

1. **Streamlit Cloud 대시보드 접속**
   - https://share.streamlit.io/

2. **앱 선택 → Settings → Secrets**

3. **Chat ID 변경**
   ```toml
   TELEGRAM_BOT_TOKEN = "123456789:ABCdefGHI..."
   TELEGRAM_CHAT_ID = "-1001234567890"  ← 마이너스 기호 포함!
   ```

   ⚠️ **주의사항:**
   - 마이너스(-) 기호 **반드시 포함**
   - 따옴표 안에 작성
   - 공백 없이

4. **Save 클릭**
   - 자동 재배포 시작 (1-2분 소요)

---

### **5단계: 테스트**

재배포 완료 후:

1. **뉴스 모니터링 페이지 접속**

2. **"📱 텔레그램 알림 설정 확인" 펼치기**

3. **"🔎 내 Chat ID 확인하기" 클릭**
   - 그룹 Chat ID가 올바르게 표시되는지 확인
   - 예: `-1001234567890`

4. **"📤 테스트 알림 보내기" 클릭**
   - 그룹 채팅방에 테스트 메시지 도착 확인! 🎉

---

## 📊 개인 vs 그룹 비교

| 항목 | 개인 메시지 | 그룹 채팅 |
|------|------------|----------|
| **Chat ID** | 양수 (1234567890) | 음수 (-1001234567890) |
| **알림** | 나만 받음 | 그룹 멤버 모두 받음 |
| **공유** | 불가능 | 가능 |
| **토론** | 불가능 | 가능 |

---

## 🔄 개인 메시지로 되돌리기

다시 개인 메시지로 받고 싶다면:

1. Streamlit Cloud → Settings → Secrets
2. `TELEGRAM_CHAT_ID`를 원래 개인 Chat ID로 변경
3. 예: `TELEGRAM_CHAT_ID = "7032432112"` (마이너스 없음)

---

## 💡 팁

### **그룹 알림 소리 끄기**
- 그룹 설정 → 알림 → "메시지 알림" 끄기
- 중요한 뉴스만 볼 수 있음

### **봇 권한 최소화**
- 봇에게 "메시지 보내기" 권한만 부여
- 다른 권한은 불필요

### **여러 그룹에 동시 전송**
- 현재는 하나의 Chat ID만 지원
- 여러 그룹에 보내려면 추가 개발 필요

---

## 🆘 문제 해결

### ❌ "Chat not found" 오류
- **원인:** 봇이 그룹에 추가되지 않음
- **해결:** 2단계 다시 확인 (봇을 그룹에 추가)

### ❌ "Bot was kicked from the group"
- **원인:** 봇이 그룹에서 강퇴됨
- **해결:** 봇을 다시 그룹에 추가

### ❌ 메시지가 안 옴
- **원인:** Chat ID가 잘못됨
- **해결:** 3단계 다시 확인 (getUpdates로 정확한 Chat ID 확인)

### ❌ Chat ID에 마이너스가 없음
- **원인:** 일반 그룹 (supergroup이 아님)
- **해결:** 그룹을 supergroup으로 변경 (100명 이상 추가)

---

## ✅ 완료!

이제 뉴스가 그룹 채팅방으로 옵니다! 🎉

팀원들과 함께 실시간으로 뉴스를 확인하세요!
